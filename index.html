<input></input>
<input></input>
<button>Click me!</button>
<script>
 var activate = (e) => {
  input.classList.remove('active');
  output.classList.remove('active');
  e.target.classList.add('active');
};
var convert = (text, flag) => {
  var characters = {
    'a':'I',
    'b':'g',
    'c':'u',
    'd':'X',
    'e':'H',
    'f':'1',
    'g':'4',
    'h':'$',
    'i':'T',
    'j':'*',
    'k':'a',
    'l':'+',
    'm':'P',
    'n':'d',
    'o':'9',
    'p':'%',
    'q':'m',
    'r':'.',
    's':'c',
    't':'y',
    'u':'x',
    'v':'i',
    'w':'2',
    'x':':',
    'y':'#',
    'z':'E',
    'A':'_',
    'B':'L',
    'C':'p',
    'D':'q',
    'E':'\\',
    'F':'¿',
    'G':'n',
    'H':'&',
    'I':'¬',
    'J':',',
    'K':'[',
    'L':'8',
    'M':'|',
    'N':'r',
    'O':'U',
    'P':';',
    'Q':'{',
    'R':'A',
    'S':'3',
    'T':'G',
    'U':'/',
    'V':'j',
    'W':'o',
    'X':'k',
    'Y':'O',
    'Z':']',
    '1':'e',
    '2':'¡',
    '3':'f',
    '4':'-',
    '5':'Y',
    '6':'v',
    '7':'B',
    '8':'S',
    '9':'5',
    '0':'(',
    '!':'}',
    '@':'s',
    '#':'b',
    '$':'R',
    '%':'t',
    '&':'?',
    '/':'z',
    '(':'J',
    ')':'Q',
    '=':'w',
    '?':'N',
    '¡':'F',
    '¿':'6',
    '}':'=',
    ']':'V',
    ',':'l',
    ';':'Z',
    '.':')',
    ':':'!',
    '-':'7',
    '_':'D',
    '{':'@',
    '[':'°',
    '+':'K',
    '*':'0',
    '|':'h',
    '°':'M',
    '¬':'C',
    '\\':'W'
  };
  var sretcarahc = {
	  "0": "*",
	  "1": "f",
	  "2": "w",
	  "3": "S",
	  "4": "g",
	  "5": "9",
	  "6": "¿",
	  "7": "-",
	  "8": "L",
	  "9": "o",
	  "(": "0",
	  "e": "1",
	  "¡": "2",
	  "f": "3",
	  "-": "4",
	  "Y": "5",
	  "v": "6",
	  "B": "7",
	  "S": "8",
	  "I": "a",
	  "g": "b",
	  "u": "c",
	  "X": "d",
	  "H": "e",
	  "$": "h",
	  "T": "i",
	  "*": "j",
	  "a": "k",
	  "+": "l",
	  "P": "m",
	  "d": "n",
	  "%": "p",
	  "m": "q",
	  ".": "r",
	  "c": "s",
	  "y": "t",
	  "x": "u",
	  "i": "v",
	  ":": "x",
	  "#": "y",
	  "E": "z",
	  "_": "A",
	  "L": "B",
	  "p": "C",
	  "q": "D",
	  "\\": "E",
	  "¿": "F",
	  "n": "G",
	  "&": "H",
	  "¬": "I",
	  ",": "J",
	  "[": "K",
	  "|": "M",
	  "r": "N",
	  "U": "O",
	  ";": "P",
	  "{": "Q",
	  "A": "R",
	  "G": "T",
	  "/": "U",
	  "j": "V",
	  "o": "W",
	  "k": "X",
	  "O": "Y",
	  "]": "Z",
	  "}": "!",
	  "s": "@",
	  "b": "#",
	  "R": "$",
	  "t": "%",
	  "?": "&",
	  "z": "/",
	  "J": "(",
	  "Q": ")",
	  "w": "=",
	  "N": "?",
	  "F": "¡",
	  "=": "}",
	  "V": "]",
	  "l": ",",
	  "Z": ";",
	  ")": ".",
	  "!": ":",
	  "D": "_",
	  "@": "{",
	  "°": "[",
	  "K": "+",
	  "h": "|",
	  "M": "°",
	  "C": "¬",
	  "W": "\\"
	};
  console.log("Flag is: " + flag);
  return flag?text.split('').map(char=>characters[char]).join('')
    :text.split('').map(char=>sretcarahc[char]).join('');
};

var input = document.querySelector('input');
var output = document.getElementsByTagName('input')[1];
var button = document.getElementsByTagName('button')[0];

document.querySelector('input').addEventListener('input', activate);
document.getElementsByTagName('input')[1].addEventListener('input', activate);
button.addEventListener('click', ()=>{
  console.log("235401.2");
  if (document.querySelector('input').classList[0] == 'active'){
    document.getElementsByTagName('input')[1].value = convert(document.querySelector('input').value, true);
  } else {
    document.querySelector('input').value = convert(document.getElementsByTagName('input')[1].value, false);
  }
});
</script>